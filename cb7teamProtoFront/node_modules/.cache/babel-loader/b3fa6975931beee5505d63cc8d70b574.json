{"ast":null,"code":"import _toConsumableArray from \"D:\\\\Web\\\\Kliks\\\\cb7teamProtoFront\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:\\\\Web\\\\Kliks\\\\cb7teamProtoFront\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Web\\\\Kliks\\\\cb7teamProtoFront\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Web\\\\Kliks\\\\cb7teamProtoFront\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Web\\\\Kliks\\\\cb7teamProtoFront\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Web\\\\Kliks\\\\cb7teamProtoFront\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\Web\\\\Kliks\\\\cb7teamProtoFront\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\Web\\\\Kliks\\\\cb7teamprotofront\\\\src\\\\components\\\\YourSessionModal.jsx\";\nimport React from 'react';\nimport { GlobalContext } from './GlobalContext';\nimport { Modal, Button, Row } from 'react-bootstrap';\nimport axios from 'axios';\nimport Gear from './Gear';\nimport BookSessionModalGear from './BookSessionModalGear';\nimport $ from 'jquery';\nimport MySessionsSession from './MySessionsSession';\n\nvar YourSessionModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(YourSessionModal, _React$Component);\n\n  function YourSessionModal(props, context) {\n    var _this;\n\n    _classCallCheck(this, YourSessionModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(YourSessionModal).call(this, props, context));\n    _this.handleShow = _this.handleShow.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleClose = _this.handleClose.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleBookSession = _this.handleBookSession.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addSelectedGear = _this.addSelectedGear.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.removeSelectedGear = _this.removeSelectedGear.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      session: {\n        date: \"\",\n        totalPrice: \"\"\n      },\n      sessionDefaultPrice: 50,\n      sessionPrice: 50,\n      extraGear: [],\n      selectedExtraGear: []\n    };\n    return _this;\n  }\n\n  _createClass(YourSessionModal, [{\n    key: \"addSelectedGear\",\n    value: function addSelectedGear(gear) {\n      console.log(\"clank\");\n      this.setState({\n        selectedExtraGear: [].concat(_toConsumableArray(this.state.selectedExtraGear), [gear]),\n        sessionPrice: this.state.sessionPrice + gear.price\n      });\n    }\n  }, {\n    key: \"removeSelectedGear\",\n    value: function removeSelectedGear(gear) {\n      var _this2 = this;\n\n      this.setState(function (prevState) {\n        return {\n          selectedExtraGear: prevState.selectedExtraGear.filter(function (newGear) {\n            return newGear !== gear;\n          }),\n          sessionPrice: _this2.state.sessionPrice - gear.price\n        };\n      });\n    }\n  }, {\n    key: \"handleClose\",\n    value: function handleClose() {\n      this.context.setShowYourSessionModal(false);\n    }\n  }, {\n    key: \"handleShow\",\n    value: function handleShow() {\n      this.setState({\n        show: true\n      });\n    }\n  }, {\n    key: \"handleBookSession\",\n    value: function handleBookSession() {\n      var that = this;\n      var gearArray = this.state.selectedExtraGear;\n      $.ajax({\n        url: \"http://localhost:8080/sessions/book2/\" + this.context.sessionToBook + \"/\" + this.state.sessionDefaultPrice,\n        dataType: 'json',\n        contentType: \"application/json; charset=utf-8\",\n        type: 'post',\n        headers: {\n          'X-KLICKS-AUTH': this.context.token\n        },\n        data: JSON.stringify(gearArray)\n      }).done(function () {\n        alert('Booked! Ready to go!');\n        that.handleClose();\n        window.location.reload();\n      }).catch(function (e) {\n        alert('Booked! Ready to go! :)');\n        that.handleClose();\n        window.location.reload();\n      }); // axios.post(\"http://localhost:8080/book2/\" + this.context.sessionToBook + \"/\" + this.state.sessionPrice,\n      //   {\n      //     headers: \"X-KLICKS-AUTH: \" + this.context.token\n      //   },\n      //   {\n      //     data: this.state.selectedExtraGear\n      //   }\n      // ).then(\n      //   this.handleClose()\n      // );\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this3 = this;\n\n      $.ajax({\n        url: 'http://localhost:8080/sessions/by-date/' + this.context.yourSession,\n        dataType: 'json',\n        contentType: \"application/json; charset=utf-8\",\n        type: 'get',\n        headers: {\n          'X-KLICKS-AUTH': this.context.token\n        },\n        success: function success(response) {\n          _this3.setState({\n            session: response\n          });\n        },\n        error: function error(response) {\n          console.log(response);\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, null, React.createElement(Modal, {\n        show: this.context.showYourSessionModal,\n        onHide: this.handleClose,\n        size: \"lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"display-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"BOOKED SESSION INFO HERE\"), React.createElement(MySessionsSession, {\n        session: this.state.session,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      })), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"secondary\",\n        onClick: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"Close\"), React.createElement(Button, {\n        variant: \"dark\",\n        onClick: null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Go to My Sessions\")))));\n    }\n  }]);\n\n  return YourSessionModal;\n}(React.Component);\n\nYourSessionModal.contextType = GlobalContext;\nexport default YourSessionModal;","map":{"version":3,"sources":["D:\\Web\\Kliks\\cb7teamprotofront\\src\\components\\YourSessionModal.jsx"],"names":["React","GlobalContext","Modal","Button","Row","axios","Gear","BookSessionModalGear","$","MySessionsSession","YourSessionModal","props","context","handleShow","bind","handleClose","handleBookSession","addSelectedGear","removeSelectedGear","state","session","date","totalPrice","sessionDefaultPrice","sessionPrice","extraGear","selectedExtraGear","gear","console","log","setState","price","prevState","filter","newGear","setShowYourSessionModal","show","that","gearArray","ajax","url","sessionToBook","dataType","contentType","type","headers","token","data","JSON","stringify","done","alert","window","location","reload","catch","e","yourSession","success","response","error","showYourSessionModal","Component","contextType"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { GlobalContext } from './GlobalContext';\r\nimport { Modal, Button, Row } from 'react-bootstrap';\r\nimport axios from 'axios';\r\nimport Gear from './Gear';\r\nimport BookSessionModalGear from './BookSessionModalGear';\r\nimport $ from 'jquery';\r\nimport MySessionsSession from './MySessionsSession';\r\n\r\nclass YourSessionModal extends React.Component {\r\n\r\n    static contextType = GlobalContext;\r\n\r\n    constructor(props, context) {\r\n      super(props, context);\r\n  \r\n      this.handleShow = this.handleShow.bind(this);\r\n      this.handleClose = this.handleClose.bind(this);\r\n      this.handleBookSession = this.handleBookSession.bind(this);\r\n      this.addSelectedGear = this.addSelectedGear.bind(this);\r\n      this.removeSelectedGear = this.removeSelectedGear.bind(this);\r\n  \r\n      this.state = {\r\n        session: {date: \"\",\r\n                  totalPrice: \"\"          \r\n        },\r\n        sessionDefaultPrice: 50,\r\n        sessionPrice: 50,\r\n        extraGear: [],\r\n        selectedExtraGear: []\r\n      };\r\n    }\r\n\r\n    addSelectedGear( gear ){\r\n      console.log(\"clank\")\r\n      this.setState({\r\n        selectedExtraGear: [...this.state.selectedExtraGear, gear],\r\n        sessionPrice: this.state.sessionPrice + gear.price\r\n      });\r\n    }\r\n\r\n    removeSelectedGear( gear ){\r\n        this.setState(prevState => ({ \r\n          selectedExtraGear: prevState.selectedExtraGear.filter(newGear => newGear !== gear),\r\n          sessionPrice: this.state.sessionPrice - gear.price\r\n        }));\r\n    }\r\n  \r\n    handleClose() {\r\n        this.context.setShowYourSessionModal( false )\r\n    }\r\n  \r\n    handleShow() {\r\n      this.setState({ show: true });\r\n    }\r\n\r\n    handleBookSession(){\r\n      let that = this;\r\n      let gearArray = this.state.selectedExtraGear;\r\n      $.ajax({\r\n        url: \"http://localhost:8080/sessions/book2/\" + this.context.sessionToBook + \"/\" + this.state.sessionDefaultPrice,\r\n        dataType: 'json',\r\n        contentType: \"application/json; charset=utf-8\",                       \r\n        type: 'post',         \r\n        headers: {'X-KLICKS-AUTH': this.context.token },\r\n        data: JSON.stringify(gearArray),\r\n        \r\n    }).done(\r\n      function() {\r\n        alert('Booked! Ready to go!');\r\n        that.handleClose();\r\n        window.location.reload();\r\n      }).catch(\r\n        function(e){\r\n          alert('Booked! Ready to go! :)');\r\n          that.handleClose();\r\n          window.location.reload();\r\n      });\r\n\r\n      // axios.post(\"http://localhost:8080/book2/\" + this.context.sessionToBook + \"/\" + this.state.sessionPrice,\r\n      //   {\r\n      //     headers: \"X-KLICKS-AUTH: \" + this.context.token\r\n      //   },\r\n      //   {\r\n      //     data: this.state.selectedExtraGear\r\n      //   }\r\n      // ).then(\r\n      //   this.handleClose()\r\n      // );\r\n    }\r\n\r\n    componentDidUpdate(){\r\n      $.ajax({\r\n        url: 'http://localhost:8080/sessions/by-date/' + this.context.yourSession,\r\n        dataType: 'json',\r\n        contentType: \"application/json; charset=utf-8\",                       \r\n        type: 'get',         \r\n        headers: {'X-KLICKS-AUTH': this.context.token },\r\n        success: (response) => {\r\n            this.setState({ session: response });\r\n        },\r\n        error: (response) => {\r\n          console.log(response)\r\n        }});\r\n    }\r\n  \r\n    render() {\r\n      return (\r\n        <>\r\n          <Modal show={ this.context.showYourSessionModal } onHide={ this.handleClose } size=\"lg\">\r\n            <Modal.Header closeButton>\r\n              \r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div className=\"display-4\">BOOKED SESSION INFO HERE</div>\r\n                <MySessionsSession session={ this.state.session }></MySessionsSession>\r\n              {/* <h4 className=\"row px-4 mb-3 justify-content-center\">The studio can be yours for 4 hours starting:</h4>\r\n              <div className=\"row display-3 px-4 mb-3 justify-content-center\">{this.context.sessionToBook}</div>\r\n              <div className=\"row justify-content-center mb-3\"><h3>For a total price of: {this.state.sessionPrice}€</h3></div>\r\n\r\n                <h4 className=\"row justify-content-center mb-3\"><strong>You can also rent the following gear:</strong></h4>\r\n\r\n                {this.state.extraGear.map(gear =>{\r\n                    return <BookSessionModalGear key={gear.id} gear={gear} addSelectedGear={this.addSelectedGear} removeSelectedGear={this.removeSelectedGear}/>\r\n                })} */}\r\n                {/* {this.lytrosis()} */}\r\n                {/* {console.log(this.state.selectedExtraGear)} */}\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <div className=\"row\">\r\n                <Button variant=\"secondary\" onClick={this.handleClose}>\r\n                  Close\r\n                </Button>\r\n                <Button variant=\"dark\" onClick={ null }>\r\n                  Go to My Sessions\r\n                </Button>\r\n              </div>\r\n            </Modal.Footer>\r\n          </Modal>\r\n        </>\r\n      );\r\n    }\r\n}\r\n  \r\nexport default YourSessionModal;"]},"metadata":{},"sourceType":"module"}